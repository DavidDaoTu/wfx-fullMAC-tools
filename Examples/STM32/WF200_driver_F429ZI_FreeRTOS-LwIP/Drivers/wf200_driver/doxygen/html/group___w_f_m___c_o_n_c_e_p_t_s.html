<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>WF200 FMAC driver: API concepts</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">WF200 FMAC driver
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group___w_f_m___c_o_n_c_e_p_t_s.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">API concepts<div class="ingroups"><a class="el" href="group___f_u_l_l___m_a_c___a_p_i.html">FULL_MAC_API</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>WFM API concepts.  
<a href="#details">More...</a></p>
<p>WFM API concepts. </p>


<h3><a id="WFM_CONCEPT_SSID"></a>Service Set Identifier</h3><div class="textblock"><dl class="section user"><dt></dt><dd>Service Set Identifier (SSID) is an unique identifier of a Wi-Fi network that can be seen as a network name since it's typically an ASCII or UTF8 string. </dd></dl>
<dl class="section user"><dt></dt><dd>SSID contains 0 to 32 bytes of data. When SSID is 0 bytes long, it's known as a broadcast SSID or a wildcard SSID. </dd></dl>
</div>

<h3><a id="WFM_CONCEPT_BSSID"></a>Basic Service Set Identifier</h3><div class="textblock"><dl class="section user"><dt></dt><dd>Basic Service Set Identifier (BSSID) is an unique identifier of a Wi-Fi access point. BSSID is a 6-byte field set in the same format as an IEEE 802 MAC address. <br />
See <a class="el" href="group___w_f_m___c_o_n_c_e_p_t_s.html">Media Access Control address</a> for further details. </dd></dl>
</div>

<h3><a id="WFM_CONCEPT_MAC"></a>Media Access Control address</h3><div class="textblock"><dl class="section user"><dt>Broadcast MAC address</dt><dd>When all bytes of the MAC address field are set to 0xFF, the MAC address is considered to be a broadcast MAC address. <div class="fragment"><div class="line">{ 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF }</div></div><!-- fragment --></dd></dl>
<dl class="section user"><dt>Multicast MAC address</dt><dd>When the lowest bit of the first byte is set, the MAC address is considered to be a multicast MAC address. <div class="fragment"><div class="line">{ 0x33, 0x33, 0x00, 0x00, 0x00, 0x01 }</div></div><!-- fragment --></dd></dl>
<dl class="section user"><dt>Zero MAC address</dt><dd>When all bytes of the MAC address field are set to 0x00, the MAC address is considered to be a zero MAC address. <div class="fragment"><div class="line">{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 }</div></div><!-- fragment --> </dd></dl>
</div>

<h3><a id="WFM_CONCEPT_VENDOR_IE"></a>Vendor-specific IE</h3><div class="textblock"><dl class="section user"><dt></dt><dd>802.11 Vendor-Specific element starts with a 1-byte Element ID (0xDD), followed by 1-byte Element Length specifying the amount of bytes after the length field. The next field is Organization Identifier (OUI) field which is typically at least 3 bytes, followed by the vendor-specific content. </dd></dl>
<dl class="section user"><dt></dt><dd>An example of a vendor-specific IE that uses a Silicon Laboratories OUI (90-FD-9F), a vendor-specific type of 0 and vendor-specific data "HELLO". <div class="fragment"><div class="line">{ 0xDD, 0x09, 0x90, 0xFD, 0x9F, 0x00, 0x48 0x,45 0x4C, 0x4C, 0x4F }</div></div><!-- fragment --> </dd></dl>
</div>

<h3><a id="WFM_CONCEPT_PASSWORD"></a>Passwords and passphrases</h3><div class="textblock"><dl class="section user"><dt></dt><dd>Note that the Password element must always contain <a class="el" href="group___w_f_m___c_o_n_s_t_a_n_t_s.html#gaa080f8ada27117823014a40802c107e4" title="Length of password element. ">WFM_API_PASSWORD_SIZE</a> bytes. Only the bytes up to PasswordLength are considered to be valid, the rest are ignored. </dd></dl>
<dl class="section user"><dt>An example of a 64-bit WEP key "12345" in ASCII format</dt><dd><div class="fragment"><div class="line">{ 0x31, 0x32, 0x33, 0x34, 0x35 }</div></div><!-- fragment --></dd></dl>
<dl class="section user"><dt>An example of a 64-bit WEP key "\x31\x32\x33\x34\x35" in HEX format</dt><dd><div class="fragment"><div class="line">{ 0x33, 0x31, 0x33, 0x32, 0x33, 0x33, 0x33, 0x34, 0x33, 0x35 }</div></div><!-- fragment --> </dd></dl>
</div>

<h3><a id="WFM_CONCEPT_RCPI"></a>Received Channel Power Indicator</h3><div class="textblock"><dl class="section user"><dt></dt><dd>Received Channel Power Indicator (RCPI) is a monotonically increasing, logarithmic function of the received power level. <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Value  </th><th class="markdownTableHeadNone">Description   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0  </td><td class="markdownTableBodyNone">Power level is less than -109.5 dBm   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">1 - 219  </td><td class="markdownTableBodyNone">Power level is between -109.5 dBm and 0 dBm   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">220  </td><td class="markdownTableBodyNone">Power level is equal or greater than 0 dBm   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">221 - 255  </td><td class="markdownTableBodyNone">Reserved   </td></tr>
</table>
</dd></dl>
<p>The following equation can be used to convert the RCPI value to corresponding dBm value. <br />
[signal level in dBm] = (RCPI / 2) - 110 <br />
RCPI 60 =&gt; signal level is -80 dBm <br />
RCPI 80 =&gt; signal level is -70 dBm </div>

<h3><a id="WFM_CONCEPT_PM"></a>Power management</h3><div class="textblock"><dl class="section user"><dt></dt><dd>In Wi-Fi power management, a device has two power modes: active and power save. In active mode the device is able to transmit and receive packets. When in power save, the device has signaled other devices it's available only periodically and communicating with it requires specific power management procedures. </dd></dl>
<dl class="section user"><dt></dt><dd>Wi-Fi power management is different from device power management. Even when the device has enabled Wi-Fi power save, it doesn't necessarily mean the device is actually in a low-power state. Wi-Fi power save must be enabled in order to use device power management but not vice versa. </dd></dl>
<dl class="section user"><dt></dt><dd>Wi-Fi power save is only available in Wi-Fi client role. The functionality can be controlled using ::WfmHiSetPmModeReq_t message. The device has three different power management modes. </dd></dl>
<dl class="section user"><dt>WFM_PM_MODE_ACTIVE</dt><dd>In this mode the device does not use Wi-Fi power management. Since no special power management procedures are required, this mode gives the best throughput and latency. Device power management cannot be used in this mode. This is the default mode after connection has been established. </dd></dl>
<dl class="section user"><dt>WFM_PM_MODE_BEACON</dt><dd>In this mode the device signals to the Wi-Fi access point it's in power save and thus only available on periodic intervals. This causes the access point to buffer packets destined to the device until the device retrieves them and therefore causes extra delays on received packets. However, the mode allows the device to use device power management. </dd></dl>
<dl class="section user"><dt>WFM_PM_MODE_DTIM</dt><dd>This mode is similar to WFM_PM_MODE_BEACON but it uses a different periodic interval called DTIM period. Length of the DTIM period depends on the access point used but it is at least as long as the period in WFM_PM_MODE_BEACON. </dd></dl>
</div>

<h3><a id="WFM_CONCEPT_HIDDEN"></a>Hidden network</h3><div class="textblock"><dl class="section user"><dt></dt><dd>Usually a Wi-Fi access point will advertise its details in Beacon frames as well as in Probe Response frames which are sent as a response to Probe Request frames. One of the details advertised is the SSID of the network. </dd></dl>
<dl class="section user"><dt></dt><dd>When the network is hidden, the device will replace the actual SSID in Beacon frames with a broadcast SSID and will stop responding to Probe Requests that do not specify the correct SSID. In practise, other stations will still see there is a network near-by due to the Beacon frames but they will not be able to determine the SSID. </dd></dl>
<dl class="section user"><dt></dt><dd>This feature shouldn't be seen as a security feature since it's fairly simple to determine the SSID by passively observing stations that know the correct SSID. </dd></dl>
</div>

<h3><a id="WFM_CONCEPT_ISOLATION"></a>Client isolation</h3><div class="textblock"><dl class="section user"><dt></dt><dd>When a Wi-Fi network has multiple stations connected, they communicate with each other by first sending the data frame to the access point. Access Point then determines the destination is one of its clients and resends the frame to the destination station.</dd></dl>
<p>When client isolation is enabled, the access point will discard all data frames intended to other stations. Therefore the stations will only be able to communicate with the access point. </div>

<h3><a id="WFM_CONCEPT_PACKET"></a>Packet types</h3><div class="textblock"><dl class="section user"><dt>Data frame with Ethernet II header</dt><dd>When transmitting and receiving data frames in this format, the payload message such as an IP packet or an ARP packet is encapsulated in an Ethernet II frame header without the trailing CRC checksum. </dd></dl>
<dl class="section user"><dt></dt><dd>Ethernet II headers is 14 bytes (6-byte Destination MAC address, 6-byte Source MAC Address, 2-byte EtherType). The EtherType is written in big-endian format. </dd></dl>
<dl class="section user"><dt></dt><dd>An ARP packet (EtherType 0x0806) sent to the broadcast address (FF:FF:FF:FF:FF:FF) from the source MAC address (00:01:02:03:04:05) therefore starts with the header <div class="fragment"><div class="line">{ 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x08, 0x06 }</div></div><!-- fragment --> and is immediately followed by the actual ARP packet. </dd></dl>
</div>

<h3><a id="WFM_CONCEPT_SCAN"></a>Scanning</h3><div class="textblock"><dl class="section user"><dt>Scan mode</dt><dd>The device supports two modes of scanning: active and passive. In passive mode, the device will switch to each channel to be scanned in turn and listen for access points operating on the channel. After a time limit, it switches to the next channel. </dd></dl>
<dl class="section user"><dt></dt><dd>The active mode is similar to the passive mode but in addition to listening, the device will solicitate advertisements from the access points on the channel. Whether an access point responds to a solicitation depends on the SSID(s) used in the scan. If the scan is performed with a wildcard SSID, all access points on the channel will respond. If performed with a specific SSID, only the access points having that SSID will respond. </dd></dl>
<dl class="section user"><dt></dt><dd>Note that even when scanning with a specific SSID, the scan results may contain other access points if the device happened to hear the advertisement while on the channel. </dd></dl>
<dl class="section user"><dt>Specific channel list</dt><dd>It's possible to specify a list of channels to be scanned. The channel list is an array of bytes, one byte per channel. The channels are scanned in the order given. </dd></dl>
<dl class="section user"><dt></dt><dd>An example of channels list (1, 6, 11) <div class="fragment"><div class="line">{ 0x01, 0x06, 0x11 }</div></div><!-- fragment --> </dd></dl>
<dl class="section user"><dt>Specific SSID list</dt><dd>When performing an active scan, a list of SSIDs to be scanned can be specified. Only the SSIDs on the list will be queried. The lists consists of multiple ::WfmHiSsidDef_t elements concatenated together. </dd></dl>
</div>

<h3><a id="WFM_CONCEPT_OFFLOADING"></a>Offloading</h3><div class="textblock"><dl class="section user"><dt></dt><dd>In order to facilitate low-power use-cases, there is a possibility to offload replying to Address Resolution Protocol (ARP) requests and IPv6 Neighbor Solicitation (NS) packets to the device. By default the offloading functionality is disabled. </dd></dl>
<dl class="section user"><dt>ARP offloading</dt><dd>When the functionality is enabled, the device will respond to ARP requests that specify one of the configured IPv4 addresses. The request is not forwarded to the host. The functionality can be controlled using ::WfmHiSetArpIpAddressReq_t message. </dd></dl>
<dl class="section user"><dt>NS offloading</dt><dd>When the functionality is enabled, the device will respond to IPv6 NS packets that specify one of the configured IPv6 addresses. The request is not forwarded to the host. The functionality can be controlled using ::WfmHiSetNsIpAddressReq_t message. </dd></dl>
</div>

<h3><a id="WFM_CONCEPT_FILTERING"></a>Filtering</h3><div class="textblock"><dl class="section user"><dt></dt><dd>By default, the device will forward all packets it receives from the network to the host. In a busy network, processing the broadcast and the multicast traffic may be a significant source of power consumption on the host. In order to facilitate low-power use-cases, the device offers multiple options for discarding some of the received packets in the firmware. </dd></dl>
<dl class="section user"><dt>Multicast filtering</dt><dd>Filtering of multicast traffic is based on a whitelist of destination multicast addresses. Any received packet whose destination address does not match the whitelist is automatically discarded. In case the host is not interested in multicast traffic, it's also possible to discard all multicast traffic. By default all multicast packets are accepted. The functionality can be controlled using ::WfmHiAddMulticastAddrReq_t and ::WfmHiRemoveMulticastAddrReq_t messages. </dd></dl>
<dl class="section user"><dt>Broadcast filtering</dt><dd>Broadcast filtering is a boolean option. When enabled, the device will discard all received packets sent to the broadcast address except ARP and DHCP messages. By default all broadcast packets are accepted. The functionality can be controlled using ::WfmHiSetBroadcastFilterReq_t message. </dd></dl>
</div>

<h3><a id="WFM_CONCEPT_ROAM"></a>Roaming</h3><div class="textblock"><dl class="section user"><dt></dt><dd>When operating in Wi-Fi client role, the device is capable of autonomously switching to a different access point when the current access point is either lost or the signal strength drops below the roaming threshold. The device will only consider access points that have the same SSID and that otherwise have the same security capabilities as the previous access point. </dd></dl>
<dl class="section user"><dt></dt><dd>The autonomous roaming functionality can be disabled by setting the corresponding option in ::WfmHiConnectReq_t message. The various roaming parameters may be adjusted using ::WfmHiSetRoamParametersReq_t message. Parameter changes will be applied at the next connection. </dd></dl>
</div>

<h3><a id="WFM_CONCEPT_TX_RATE"></a>Transmit rate</h3><div class="textblock"><dl class="section user"><dt></dt><dd>A Wi-Fi device may use a number of different data rates for transmission. When operating as a client, a device adapts the rates it uses to match those the access point authorizes. However it is possible to specify rates that Ineo will not use even if they are allowed by the network. </dd></dl>
<dl class="section user"><dt></dt><dd>The precise allowed rates may be adjusted using ::WfmHiSetTxRateParametersReq_t message. Parameter changes will be applied at the next connection. If no overlap between these parameters and the access point's supported rates list is found then it will default to using only 1Mbits/sec rate. </dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Jan 3 2019 12:29:09 for WF200 FMAC driver by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
